{% comment %}
  Why Choose Section for Shopify 3.0
  Displays a grid of feature cards with images, titles, and descriptions
{% endcomment %}

<style>
  .why-choose-section {
    padding: {{ section.settings.padding_top }}px 20px {{ section.settings.padding_bottom }}px;
    background-color: {{ section.settings.background_color }};
  }

  .why-choose-container {
    max-width: 1200px;
    margin: 0 auto;
  }

  .why-choose-heading {
    font-size: 32px;
    font-weight: 400;
    margin-bottom: 30px;
    text-align: left;
    color: {{ section.settings.heading_color }};
  }

  .why-choose-heading .highlight {
    color: {{ section.settings.highlight_color }};
  }

  .why-choose-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
  }

  .why-choose-card {
    background-color: {{ section.settings.card_background }};
    border-radius: 12px;
    overflow: hidden;
    position: relative;
    display: flex;
    flex-direction: column;
  }

  .why-choose-card.has-image {
    min-height: 280px;
  }

  .why-choose-card.no-image {
    min-height: 200px;
    padding: 30px 25px;
  }

  .why-choose-card-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 1;
  }

  .why-choose-card-content {
    position: relative;
    z-index: 2;
    padding: 30px 25px;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    height: 100%;
    min-height: 280px;
  }

  .why-choose-card.no-image .why-choose-card-content {
    padding: 0;
    min-height: auto;
  }

  .why-choose-card-title {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 12px;
    color: #333;
  }

  .why-choose-card.has-image .why-choose-card-title {
    color: #fff;
    font-size: 24px;
  }

  .why-choose-card-description {
    font-size: 14px;
    line-height: 1.6;
    color: #666;
  }

  .why-choose-card.has-image .why-choose-card-description {
    color: rgba(255, 255, 255, 0.9);
  }

  .why-choose-card-icon {
    width: 80px;
    height: 80px;
    object-fit: contain;
    margin-bottom: 15px;
  }

  /* Large card styling - spans 2 columns */
  .why-choose-card.large {
    grid-column: span 2;
  }

  /* Mobile responsive */
  @media (max-width: 768px) {
    .why-choose-heading {
      font-size: 24px;
      margin-bottom: 20px;
    }

    .why-choose-grid {
      grid-template-columns: 1fr;
      gap: 15px;
    }

    .why-choose-card.large {
      grid-column: span 1;
    }

    .why-choose-card.has-image {
      min-height: 240px;
    }

    .why-choose-card-content {
      padding: 25px 20px;
      min-height: 240px;
    }

    .why-choose-card.no-image {
      min-height: 180px;
      padding: 25px 20px;
    }

    .why-choose-card-title {
      font-size: 18px;
    }

    .why-choose-card.has-image .why-choose-card-title {
      font-size: 20px;
    }

    .why-choose-card-description {
      font-size: 13px;
    }

    .why-choose-card-icon {
      width: 60px;
      height: 60px;
    }
  }

  /* Tablet responsive */
  @media (min-width: 769px) and (max-width: 1024px) {
    .why-choose-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .why-choose-card.large {
      grid-column: span 2;
    }
  }
</style>

<div class="why-choose-section">
  <div class="why-choose-container">
{% if section.settings.heading_part1 != blank 
   or section.settings.heading_part2 != blank 
   or section.settings.heading_part3 != blank %}
  <h2 class="why-choose-heading">
    {{ section.settings.heading_part1 }}
    <span class="highlight">{{ section.settings.heading_part2 }}</span>
    {{ section.settings.heading_part3 }}
  </h2>
    {% endif %}

    <div class="why-choose-grid">
      {% for block in section.blocks %}
        <div class="why-choose-card {% if block.settings.card_size == 'large' %}large{% endif %} {% if block.settings.background_image != blank %}has-image{% else %}no-image{% endif %}" {{ block.shopify_attributes }}>
          
          {% if block.settings.background_image != blank %}
            <img 
              class="why-choose-card-image" 
              src="{{ block.settings.background_image | image_url: width: 800 }}"
              srcset="{{ block.settings.background_image | image_url: width: 400 }} 400w,
                      {{ block.settings.background_image | image_url: width: 600 }} 600w,
                      {{ block.settings.background_image | image_url: width: 800 }} 800w"
              sizes="(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 33vw"
              alt="{{ block.settings.title }}"
              loading="lazy"
            >
          {% endif %}

          <div class="why-choose-card-content">
            {% if block.settings.icon != blank %}
              <img 
                class="why-choose-card-icon" 
                src="{{ block.settings.icon | image_url: width: 160 }}"
                alt="{{ block.settings.title }}"
                loading="lazy"
              >
            {% endif %}

            {% if block.settings.title != blank %}
              <h3 class="why-choose-card-title">{{ block.settings.title }}</h3>
            {% endif %}

            {% if block.settings.description != blank %}
              <p class="why-choose-card-description">{{ block.settings.description }}</p>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Why Choose",
  "tag": "section",
  "class": "section-why-choose",
  "settings": [
    {
      "type": "text",
      "id": "heading_part1",
      "label": "Heading Part 1",
      "default": "Why"
    },
    {
      "type": "text",
      "id": "heading_part2",
      "label": "Heading Part 2 (Highlighted)",
      "default": "Choose"
    },
    {
      "type": "text",
      "id": "heading_part3",
      "label": "Heading Part 3",
      "default": "Compatto"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "highlight_color",
      "label": "Highlight Color",
      "default": "#A0826D"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Section Background Color",
      "default": "#F5F5F5"
    },
    {
      "type": "color",
      "id": "card_background",
      "label": "Card Background Color",
      "default": "#E8DED5"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding Top",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 60
    }
  ],
  "blocks": [
    {
      "type": "feature_card",
      "name": "Feature Card",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Feature Title"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "Feature description goes here."
        },
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icon Image (Optional)"
        },
        {
          "type": "image_picker",
          "id": "background_image",
          "label": "Background Image (Optional)"
        },
        {
          "type": "select",
          "id": "card_size",
          "label": "Card Size",
          "options": [
            {
              "value": "normal",
              "label": "Normal"
            },
            {
              "value": "large",
              "label": "Large (2 columns)"
            }
          ],
          "default": "normal"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Why Choose",
      "blocks": [
        {
          "type": "feature_card",
          "settings": {
            "title": "End-to-End Solutions",
            "description": "We manage every aspect of your furnishing project, saving you time and resources.",
            "card_size": "normal"
          }
        },
        {
          "type": "feature_card",
          "settings": {
            "title": "After-Sales Support",
            "description": "We are committed to providing ongoing support with quick solutions to address any future needs or concerns.",
            "card_size": "normal"
          }
        },
        {
          "type": "feature_card",
          "settings": {
            "title": "No Variety Restrictions",
            "description": "We provide you with a wide range to match your quality standards, design preferences, and budget, allowing you to choose furniture solutions to suit your needs and preferences.",
            "card_size": "normal"
          }
        },
        {
          "type": "feature_card",
          "settings": {
            "title": "Superior Quality",
            "description": "Partnering with the best suppliers, great for access to top-tier craftsmanship and quality control principles.",
            "card_size": "large"
          }
        },
        {
          "type": "feature_card",
          "settings": {
            "title": "Bespoke Furniture",
            "description": "We specialize in sourcing custom-made furniture pieces that perfectly match your unique vision and requirements.",
            "card_size": "normal"
          }
        }
      ]
    }
  ]
}
{% endschema %}
