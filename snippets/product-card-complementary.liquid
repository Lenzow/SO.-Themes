<div class="product-card-small hover-area {% if block.settings.image_hover == "default" %}{{ settings.image_hover }}{% else %}{{ block.settings.image_hover }}{% endif %}{% if block.settings.align_content == "center" %} align-items-center{% endif %}">
  {%- if product.featured_media != blank -%}
  <a href="{{ product.url }}" class="product-card-extra-small__image-container product-card__image-container">
    {%- liquid
        assign image_ratio_value = block.settings.image_ratio
        if forloop.index > 4
        assign load_priority_low = 'true'
        endif
        assign show_secondary_image = false
        if block.settings.show_secondary_image == true
        assign show_secondary_image = 'show_secondary_image'
        endif
    -%}
    <div class="image-hover-box__container{% if image_ratio_value == '1.00' %} image-hover-box--circle{% endif %}">
      {%- render "component-image-product-card",
          image_ratio_value: image_ratio_value,
          image_source: product.featured_media,
          image_source2: product.media[1],
          show_image_source2: show_secondary_image,
          load_priority_low: load_priority_low,
          section_index: section.index
      -%}
    </div>
  </a>
  {%- endif -%}
  <div class="product-card-small__content mt--first-child-0">
    {%- capture badges -%}
    {%- if product.available == false and block.settings.show_badge_sold_out -%}
    <span class="badges-item__small badges-item__sold-out">{{ 'products.product.sold_out' | t }}</span>
    {%- elsif product.compare_at_price > product.price and product.available and block.settings.show_badge_on_sale -%}
    <span class="badges-item__small badges-item__sale">{{ 'products.product.on_sale' | t }}</span>
    {%- endif -%}
    {%- if product.metafields.softali.featured_badge != blank and block.settings.show_badge_feature -%}
    <span class="badges-item__small badges-item__main">{{ product.metafields.softali.featured_badge }}</span>
    {%- endif -%}
    {%- endcapture -%}
    
    {%- if badges != blank -%}
    <div class="badges__container">{{- badges -}}</div>
    {%- endif -%}

    {%- if block.settings.show_vendor and product.vendor != blank -%}
    <div class="body3 mt3">
      <a class="mt0 product-card-small__meta link link__base-to_accent-color text-uppercase a--no-hover-color native-hover"
         href="{{ routes.collections_url }}/all?filter.p.vendor={{ product.vendor | escape }}">{{ product.vendor }}</a>
    </div>
    {%- endif -%}

    {%- assign truncate_product_name = block.settings.truncate_product_name -%}
    {%- assign last_characters = 'general.abbreviation_of_text_in_a_section.last_characters' | t -%}
    <div class="body2 mt3">
      <a href="{{ product.url }}" class="product-card-small__heading heading-color-block-hover a--no-hover-color clear-underline{% if block.settings.hover_underline %} animation-underline{% endif %} native-hover">
        {%- if truncate_product_name -%}
        {{ product.title | escape | truncate: 48,last_characters }}
        {%- else -%}
        {{ product.title | escape }}
        {%- endif -%}
      </a>
    </div>
    {%- if block.settings.show_price -%}
    {%- render 'price', product: product, size:settings.product_card_price_size -%}
    {%- endif -%}
    {%- if settings.enable_rating -%}{%- if block.settings.enable_rating_product_card -%}
    {%- render 'review-stars' _product: product -%}
    {%- endif -%}{%- endif -%}
  </div>
</div>